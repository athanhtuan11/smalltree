{% extends "flashcard/base.html" %}

{% block title %}Pháº§n thÆ°á»Ÿng!{% endblock %}

{% block content %}
<div class="rewards-container">
    <div class="rewards-animation">ğŸ‰</div>
    <h1>Tuyá»‡t vá»i!</h1>
    
    <div class="rewards-card">
        <div class="reward-item" style="background: linear-gradient(135deg, var(--pastel-yellow), white);">
            <div class="icon">â­</div>
            <div class="label">Sao kiáº¿m Ä‘Æ°á»£c</div>
            <div class="value">+{{ stars }}</div>
        </div>
        
        {% if progress %}
        <div class="reward-item" style="background: linear-gradient(135deg, var(--pastel-pink), white);">
            <div class="icon">ğŸ†</div>
            <div class="label">Tá»•ng sá»‘ sao</div>
            <div class="value">{{ progress.stars }}</div>
        </div>
        
        <div class="reward-item" style="background: linear-gradient(135deg, var(--pastel-blue), white);">
            <div class="icon">ğŸ”¥</div>
            <div class="label">Streak</div>
            <div class="value">{{ progress.streak_days }} ngÃ y</div>
        </div>
        
        {% if progress.completion_date %}
        <div class="reward-item" style="background: linear-gradient(135deg, var(--pastel-green), white);">
            <div class="icon">ğŸ</div>
            <div class="label">HoÃ n thÃ nh bá»™ tháº»!</div>
            <div class="value">âœ…</div>
        </div>
        {% endif %}
        {% endif %}
    </div>
    
    <a href="{{ url_for('flashcard.index') }}" class="btn-control btn-finish" style="display: inline-block; margin-top: 30px;">
        ğŸ  Vá» trang chá»§
    </a>
    
    {% if deck %}
    <a href="{{ url_for('flashcard.deck_detail', deck_id=deck.id) }}" class="btn-control btn-next" style="display: inline-block; margin-top: 20px;">
        ğŸ”„ Há»c láº¡i
    </a>
    {% endif %}
</div>

<script>
// PhÃ¡o hoa khi load trang
window.addEventListener('DOMContentLoaded', () => {
    setTimeout(() => {
        confetti({
            particleCount: 150,
            spread: 90,
            origin: { y: 0.5 }
        });
    }, 300);
    
    setTimeout(() => {
        confetti({
            particleCount: 150,
            spread: 90,
            origin: { y: 0.5 }
        });
    }, 1000);
    
    // Text-to-speech
    tts.speak('Tuyá»‡t vá»i! BÃ© há»c giá»i quÃ¡!');
    
    // Animation
    anime({
        targets: '.rewards-card',
        scale: [0.8, 1],
        opacity: [0, 1],
        duration: 800,
        easing: 'easeOutElastic(1, .6)'
    });
    
    anime({
        targets: '.reward-item',
        translateX: [-50, 0],
        opacity: [0, 1],
        delay: anime.stagger(100, {start: 400}),
        duration: 600,
        easing: 'easeOutQuad'
    });
});
</script>
{% endblock %}
